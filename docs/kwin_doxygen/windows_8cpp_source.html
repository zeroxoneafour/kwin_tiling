<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KWin: src/kcms/options/windows.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KWin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0eb666e20e08e1bc8987c9ef133e9047.html">kcms</a></li><li class="navelem"><a class="el" href="dir_fa91c96c89142546929174a049a679e3.html">options</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">windows.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="windows_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">    windows.cpp</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"></span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">    SPDX-FileCopyrightText: 1997 Patrick Dowler &lt;dowler@morgul.fsh.uvic.ca&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">    SPDX-FileCopyrightText: 2001 Waldo Bastian &lt;bastian@kde.org&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"></span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">    SPDX-License-Identifier: GPL-2.0-or-later</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">*/</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;QApplication&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;QCheckBox&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;QFormLayout&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;QGroupBox&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;QHBoxLayout&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;QLabel&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;QRadioButton&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;QScreen&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;QtDBus&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;KConfig&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;KConfigGroup&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;KLocalizedString&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;KWindowSystem&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;kwinoptions_settings.h&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="windows_8h.html">windows.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;kwin_effects_interface.h&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;kwinoptions_kdeglobals_settings.h&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;kwinoptions_settings.h&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">   32</a></span><span class="preprocessor">#define CLICK_TO_FOCUS 0</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="windows_8cpp.html#a68c7b2334fd4799930a34fb1559add1a">   33</a></span><span class="preprocessor">#define CLICK_TO_FOCUS_MOUSE_PRECEDENT 1</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="windows_8cpp.html#a01d99d8f84cd29efe3e89f7a05481c51">   34</a></span><span class="preprocessor">#define FOCUS_FOLLOWS_MOUSE 2</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="windows_8cpp.html#ad78d1ff462bd8bb5af59581b0f24d1f3">   35</a></span><span class="preprocessor">#define FOCUS_FOLLOWS_MOUSE_PRECEDENT 3</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="windows_8cpp.html#ae819e63bce4d34e8e7dac43295fddaf0">   36</a></span><span class="preprocessor">#define FOCUS_UNDER_MOUSE 4</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="windows_8cpp.html#af84070ae619475983f055a5a1c986ad8">   37</a></span><span class="preprocessor">#define FOCUS_STRICTLY_UNDER_MOUSE 5</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="keyword">namespace</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>{</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> defaultFocusPolicyIndex = <a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a>;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>}</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="foldopen" id="foldopen00044" data-start="{" data-end="}">
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="class_k_win_focus_config_form.html#a4980bbe7de8c5dea743ab9fa229077d1">   44</a></span><a class="code hl_function" href="class_k_win_focus_config_form.html#a4980bbe7de8c5dea743ab9fa229077d1">KWinFocusConfigForm::KWinFocusConfigForm</a>(QWidget *parent)</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    : QWidget(parent)</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>{</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    setupUi(parent);</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>}</div>
</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="foldopen" id="foldopen00050" data-start="{" data-end="}">
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="class_k_focus_config.html#abfa9b12d17504b5590549725d134c86b">   50</a></span><a class="code hl_function" href="class_k_focus_config.html#abfa9b12d17504b5590549725d134c86b">KFocusConfig::KFocusConfig</a>(<span class="keywordtype">bool</span> _standAlone, KWinOptionsSettings *settings, QWidget *parent)</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    : KCModule(parent, KPluginMetaData())</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    , standAlone(_standAlone)</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    , m_ui(new <a class="code hl_class" href="class_k_win_focus_config_form.html">KWinFocusConfigForm</a>(widget()))</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>{</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="keywordflow">if</span> (settings) {</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <a class="code hl_function" href="class_k_focus_config.html#a85ac8f529f09653e8480ee117a738be5">initialize</a>(settings);</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    }</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>}</div>
</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="foldopen" id="foldopen00060" data-start="{" data-end="}">
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="class_k_focus_config.html#a85ac8f529f09653e8480ee117a738be5">   60</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_focus_config.html#a85ac8f529f09653e8480ee117a738be5">KFocusConfig::initialize</a>(KWinOptionsSettings *settings)</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>{</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    m_settings = settings;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    addConfig(m_settings, widget());</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    connect(m_ui-&gt;windowFocusPolicy, qOverload&lt;int&gt;(&amp;QComboBox::currentIndexChanged), <span class="keyword">this</span>, &amp;KFocusConfig::focusPolicyChanged);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    connect(m_ui-&gt;windowFocusPolicy, qOverload&lt;int&gt;(&amp;QComboBox::currentIndexChanged), <span class="keyword">this</span>, &amp;KFocusConfig::updateDefaultIndicator);</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    connect(<span class="keyword">this</span>, SIGNAL(defaultsIndicatorsVisibleChanged(<span class="keywordtype">bool</span>)), <span class="keyword">this</span>, SLOT(updateDefaultIndicator()));</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    connect(qApp, &amp;QGuiApplication::screenAdded, <span class="keyword">this</span>, &amp;KFocusConfig::updateMultiScreen);</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    connect(qApp, &amp;QGuiApplication::screenRemoved, <span class="keyword">this</span>, &amp;KFocusConfig::updateMultiScreen);</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    updateMultiScreen();</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>}</div>
</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keywordtype">void</span> KFocusConfig::updateMultiScreen()</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>{</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    m_ui-&gt;multiscreenBehaviorLabel-&gt;setVisible(QApplication::screens().count() &gt; 1);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    m_ui-&gt;kcfg_SeparateScreenFocus-&gt;setVisible(QApplication::screens().count() &gt; 1);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>}</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keywordtype">void</span> KFocusConfig::updateDefaultIndicator()</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>{</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> isDefault = m_ui-&gt;windowFocusPolicy-&gt;currentIndex() == defaultFocusPolicyIndex;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    m_ui-&gt;windowFocusPolicy-&gt;setProperty(<span class="stringliteral">&quot;_kde_highlight_neutral&quot;</span>, defaultsIndicatorsVisible() &amp;&amp; !isDefault);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    m_ui-&gt;windowFocusPolicy-&gt;update();</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>}</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="keywordtype">void</span> KFocusConfig::updateFocusPolicyExplanatoryText()</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>{</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> focusPolicy = m_ui-&gt;windowFocusPolicy-&gt;currentIndex();</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="keywordflow">switch</span> (focusPolicy) {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a>:</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        m_ui-&gt;windowFocusPolicyDescriptionLabel-&gt;setText(i18n(<span class="stringliteral">&quot;&lt;em&gt;Click to focus:&lt;/em&gt; A window becomes active when you click into it. This behavior is common on other operating systems and likely what you want.&quot;</span>));</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a68c7b2334fd4799930a34fb1559add1a">CLICK_TO_FOCUS_MOUSE_PRECEDENT</a>:</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        m_ui-&gt;windowFocusPolicyDescriptionLabel-&gt;setText(i18n(<span class="stringliteral">&quot;&lt;em&gt;Click to focus (mouse precedence):&lt;/em&gt; Mostly the same as &lt;em&gt;Click to focus&lt;/em&gt;. If an active window has to be chosen by the system (eg. because the currently active one was closed) the window under the mouse is the preferred candidate. Unusual, but possible variant of &lt;em&gt;Click to focus&lt;/em&gt;.&quot;</span>));</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a01d99d8f84cd29efe3e89f7a05481c51">FOCUS_FOLLOWS_MOUSE</a>:</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        m_ui-&gt;windowFocusPolicyDescriptionLabel-&gt;setText(i18n(<span class="stringliteral">&quot;&lt;em&gt;Focus follows mouse:&lt;/em&gt; Moving the mouse onto a window will activate it. Eg. windows randomly appearing under the mouse will not gain the focus. &lt;em&gt;Focus stealing prevention&lt;/em&gt; takes place as usual. Think as &lt;em&gt;Click to focus&lt;/em&gt; just without having to actually click.&quot;</span>));</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#ad78d1ff462bd8bb5af59581b0f24d1f3">FOCUS_FOLLOWS_MOUSE_PRECEDENT</a>:</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        m_ui-&gt;windowFocusPolicyDescriptionLabel-&gt;setText(i18n(<span class="stringliteral">&quot;This is mostly the same as &lt;em&gt;Focus follows mouse&lt;/em&gt;. If an active window has to be chosen by the system (eg. because the currently active one was closed) the window under the mouse is the preferred candidate. Choose this, if you want a hover controlled focus.&quot;</span>));</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#ae819e63bce4d34e8e7dac43295fddaf0">FOCUS_UNDER_MOUSE</a>:</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        m_ui-&gt;windowFocusPolicyDescriptionLabel-&gt;setText(i18n(<span class="stringliteral">&quot;&lt;em&gt;Focus under mouse:&lt;/em&gt; The focus always remains on the window under the mouse.&lt;br/&gt;&lt;strong&gt;Warning:&lt;/strong&gt; &lt;em&gt;Focus stealing prevention&lt;/em&gt; and the &lt;em&gt;tabbox (&#39;Alt+Tab&#39;)&lt;/em&gt; contradict the activation policy and will not work. You very likely want to use &lt;em&gt;Focus follows mouse (mouse precedence)&lt;/em&gt; instead!&quot;</span>));</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#af84070ae619475983f055a5a1c986ad8">FOCUS_STRICTLY_UNDER_MOUSE</a>:</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        m_ui-&gt;windowFocusPolicyDescriptionLabel-&gt;setText(i18n(<span class="stringliteral">&quot;&lt;em&gt;Focus strictly under mouse:&lt;/em&gt; The focus is always on the window under the mouse (in doubt nowhere) very much like the focus behavior in an unmanaged legacy X11 environment.&lt;br/&gt;&lt;strong&gt;Warning:&lt;/strong&gt; &lt;em&gt;Focus stealing prevention&lt;/em&gt; and the &lt;em&gt;tabbox (&#39;Alt+Tab&#39;)&lt;/em&gt; contradict the activation policy and will not work. You very likely want to use &lt;em&gt;Focus follows mouse (mouse precedence)&lt;/em&gt; instead!&quot;</span>));</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>}</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="keywordtype">void</span> KFocusConfig::focusPolicyChanged()</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>{</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordtype">int</span> selectedFocusPolicy = 0;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keywordtype">bool</span> selectedNextFocusPrefersMouseItem = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> loadedNextFocusPrefersMouseItem = m_settings-&gt;nextFocusPrefersMouse();</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    updateFocusPolicyExplanatoryText();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keywordtype">int</span> focusPolicy = m_ui-&gt;windowFocusPolicy-&gt;currentIndex();</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="keywordflow">switch</span> (focusPolicy) {</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a>:</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        selectedFocusPolicy = KWinOptionsSettings::EnumFocusPolicy::ClickToFocus;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a68c7b2334fd4799930a34fb1559add1a">CLICK_TO_FOCUS_MOUSE_PRECEDENT</a>:</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        selectedFocusPolicy = KWinOptionsSettings::EnumFocusPolicy::ClickToFocus;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        selectedNextFocusPrefersMouseItem = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a01d99d8f84cd29efe3e89f7a05481c51">FOCUS_FOLLOWS_MOUSE</a>:</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        selectedFocusPolicy = KWinOptionsSettings::EnumFocusPolicy::FocusFollowsMouse;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#ad78d1ff462bd8bb5af59581b0f24d1f3">FOCUS_FOLLOWS_MOUSE_PRECEDENT</a>:</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        selectedFocusPolicy = KWinOptionsSettings::EnumFocusPolicy::FocusFollowsMouse;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        selectedNextFocusPrefersMouseItem = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#ae819e63bce4d34e8e7dac43295fddaf0">FOCUS_UNDER_MOUSE</a>:</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        selectedFocusPolicy = KWinOptionsSettings::EnumFocusPolicy::FocusUnderMouse;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#af84070ae619475983f055a5a1c986ad8">FOCUS_STRICTLY_UNDER_MOUSE</a>:</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        selectedFocusPolicy = KWinOptionsSettings::EnumFocusPolicy::FocusStrictlyUnderMouse;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    unmanagedWidgetChangeState(m_settings-&gt;focusPolicy() != selectedFocusPolicy || loadedNextFocusPrefersMouseItem != selectedNextFocusPrefersMouseItem);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    unmanagedWidgetDefaultState(focusPolicy == defaultFocusPolicyIndex);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">// the auto raise related widgets are: autoRaise</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    m_ui-&gt;kcfg_AutoRaise-&gt;setEnabled(focusPolicy != <a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a> &amp;&amp; focusPolicy != <a class="code hl_define" href="windows_8cpp.html#a68c7b2334fd4799930a34fb1559add1a">CLICK_TO_FOCUS_MOUSE_PRECEDENT</a>);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    m_ui-&gt;kcfg_FocusStealingPreventionLevel-&gt;setDisabled(focusPolicy == <a class="code hl_define" href="windows_8cpp.html#ae819e63bce4d34e8e7dac43295fddaf0">FOCUS_UNDER_MOUSE</a> || focusPolicy == <a class="code hl_define" href="windows_8cpp.html#af84070ae619475983f055a5a1c986ad8">FOCUS_STRICTLY_UNDER_MOUSE</a>);</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="comment">// the delayed focus related widgets are: delayFocus</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    m_ui-&gt;delayFocusOnLabel-&gt;setEnabled(focusPolicy != <a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a>);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    m_ui-&gt;kcfg_DelayFocusInterval-&gt;setEnabled(focusPolicy != <a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a>);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>}</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="foldopen" id="foldopen00158" data-start="{" data-end="}">
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno"><a class="line" href="class_k_focus_config.html#abbd7aeb17eba4ff321f8265dcde2ca2c">  158</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_focus_config.html#abbd7aeb17eba4ff321f8265dcde2ca2c">KFocusConfig::load</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>{</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    KCModule::load();</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> loadedNextFocusPrefersMouseItem = m_settings-&gt;nextFocusPrefersMouse();</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="keywordtype">int</span> focusPolicy = m_settings-&gt;focusPolicy();</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="keywordflow">switch</span> (focusPolicy) {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="comment">// the ClickToFocus and FocusFollowsMouse have special values when</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="comment">// NextFocusPrefersMouse is true</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keywordflow">case</span> KWinOptionsSettings::EnumFocusPolicy::ClickToFocus:</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        m_ui-&gt;windowFocusPolicy-&gt;setCurrentIndex(<a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a> + loadedNextFocusPrefersMouseItem);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keywordflow">case</span> KWinOptionsSettings::EnumFocusPolicy::FocusFollowsMouse:</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        m_ui-&gt;windowFocusPolicy-&gt;setCurrentIndex(<a class="code hl_define" href="windows_8cpp.html#a01d99d8f84cd29efe3e89f7a05481c51">FOCUS_FOLLOWS_MOUSE</a> + loadedNextFocusPrefersMouseItem);</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <span class="comment">// +2 to ignore the two special values</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        m_ui-&gt;windowFocusPolicy-&gt;setCurrentIndex(focusPolicy + 2);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    updateFocusPolicyExplanatoryText();</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>}</div>
</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="foldopen" id="foldopen00183" data-start="{" data-end="}">
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno"><a class="line" href="class_k_focus_config.html#a902b16ed2d3968692264adfb02b6779c">  183</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_focus_config.html#a902b16ed2d3968692264adfb02b6779c">KFocusConfig::save</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>{</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    KCModule::save();</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keywordtype">int</span> idxFocusPolicy = m_ui-&gt;windowFocusPolicy-&gt;currentIndex();</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keywordflow">switch</span> (idxFocusPolicy) {</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a>:</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a68c7b2334fd4799930a34fb1559add1a">CLICK_TO_FOCUS_MOUSE_PRECEDENT</a>:</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        m_settings-&gt;setFocusPolicy(KWinOptionsSettings::EnumFocusPolicy::ClickToFocus);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#a01d99d8f84cd29efe3e89f7a05481c51">FOCUS_FOLLOWS_MOUSE</a>:</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#ad78d1ff462bd8bb5af59581b0f24d1f3">FOCUS_FOLLOWS_MOUSE_PRECEDENT</a>:</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <span class="comment">// the ClickToFocus and FocusFollowsMouse have special values when</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        <span class="comment">// NextFocusPrefersMouse is true</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        m_settings-&gt;setFocusPolicy(KWinOptionsSettings::EnumFocusPolicy::FocusFollowsMouse);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#ae819e63bce4d34e8e7dac43295fddaf0">FOCUS_UNDER_MOUSE</a>:</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        m_settings-&gt;setFocusPolicy(KWinOptionsSettings::EnumFocusPolicy::FocusUnderMouse);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="keywordflow">case</span> <a class="code hl_define" href="windows_8cpp.html#af84070ae619475983f055a5a1c986ad8">FOCUS_STRICTLY_UNDER_MOUSE</a>:</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        m_settings-&gt;setFocusPolicy(KWinOptionsSettings::EnumFocusPolicy::FocusStrictlyUnderMouse);</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    m_settings-&gt;setNextFocusPrefersMouse(idxFocusPolicy == <a class="code hl_define" href="windows_8cpp.html#a68c7b2334fd4799930a34fb1559add1a">CLICK_TO_FOCUS_MOUSE_PRECEDENT</a> || idxFocusPolicy == <a class="code hl_define" href="windows_8cpp.html#ad78d1ff462bd8bb5af59581b0f24d1f3">FOCUS_FOLLOWS_MOUSE_PRECEDENT</a>);</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    m_settings-&gt;save();</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span> </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="keywordflow">if</span> (standAlone) {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>        <span class="comment">// Send signal to all kwin instances</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        QDBusMessage message =</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            QDBusMessage::createSignal(<span class="stringliteral">&quot;/KWin&quot;</span>, <span class="stringliteral">&quot;org.kde.KWin&quot;</span>, <span class="stringliteral">&quot;reloadConfig&quot;</span>);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        QDBusConnection::sessionBus().send(message);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>}</div>
</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span> </div>
<div class="foldopen" id="foldopen00218" data-start="{" data-end="}">
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno"><a class="line" href="class_k_focus_config.html#a725361ff31b4b1b2a2700fc42a3bc33c">  218</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_focus_config.html#a725361ff31b4b1b2a2700fc42a3bc33c">KFocusConfig::defaults</a>()</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>{</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    KCModule::defaults();</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    m_ui-&gt;windowFocusPolicy-&gt;setCurrentIndex(defaultFocusPolicyIndex);</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>}</div>
</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="foldopen" id="foldopen00224" data-start="{" data-end="}">
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno"><a class="line" href="class_k_win_advanced_config_form.html#aa54b772a8f46a8ea471ceeec0b177ea1">  224</a></span><a class="code hl_function" href="class_k_win_advanced_config_form.html#aa54b772a8f46a8ea471ceeec0b177ea1">KWinAdvancedConfigForm::KWinAdvancedConfigForm</a>(QWidget *parent)</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    : QWidget(parent)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>{</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    setupUi(parent);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>}</div>
</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="foldopen" id="foldopen00230" data-start="{" data-end="}">
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="class_k_advanced_config.html#a960cbba3eca2a584bf74984ef30d5ea2">  230</a></span><a class="code hl_function" href="class_k_advanced_config.html#a960cbba3eca2a584bf74984ef30d5ea2">KAdvancedConfig::KAdvancedConfig</a>(<span class="keywordtype">bool</span> _standAlone, KWinOptionsSettings *settings, KWinOptionsKDEGlobalsSettings *globalSettings, QWidget *parent)</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    : KCModule(parent, KPluginMetaData())</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    , standAlone(_standAlone)</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    , m_ui(new <a class="code hl_class" href="class_k_win_advanced_config_form.html">KWinAdvancedConfigForm</a>(widget()))</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>{</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="keywordflow">if</span> (settings &amp;&amp; globalSettings) {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <a class="code hl_function" href="class_k_advanced_config.html#a7e252730c89b2ace354ba2e5ab9bd6bf">initialize</a>(settings, globalSettings);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    }</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>}</div>
</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="foldopen" id="foldopen00240" data-start="{" data-end="}">
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno"><a class="line" href="class_k_advanced_config.html#a7e252730c89b2ace354ba2e5ab9bd6bf">  240</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_advanced_config.html#a7e252730c89b2ace354ba2e5ab9bd6bf">KAdvancedConfig::initialize</a>(KWinOptionsSettings *settings, KWinOptionsKDEGlobalsSettings *globalSettings)</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>{</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    m_settings = settings;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    addConfig(m_settings, widget());</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    addConfig(globalSettings, widget());</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    m_ui-&gt;kcfg_Placement-&gt;setItemData(KWinOptionsSettings::PlacementChoices::Smart, <span class="stringliteral">&quot;Smart&quot;</span>);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    m_ui-&gt;kcfg_Placement-&gt;setItemData(KWinOptionsSettings::PlacementChoices::Maximizing, <span class="stringliteral">&quot;Maximizing&quot;</span>);</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    m_ui-&gt;kcfg_Placement-&gt;setItemData(KWinOptionsSettings::PlacementChoices::Random, <span class="stringliteral">&quot;Random&quot;</span>);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    m_ui-&gt;kcfg_Placement-&gt;setItemData(KWinOptionsSettings::PlacementChoices::Centered, <span class="stringliteral">&quot;Centered&quot;</span>);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    m_ui-&gt;kcfg_Placement-&gt;setItemData(KWinOptionsSettings::PlacementChoices::ZeroCornered, <span class="stringliteral">&quot;ZeroCornered&quot;</span>);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    m_ui-&gt;kcfg_Placement-&gt;setItemData(KWinOptionsSettings::PlacementChoices::UnderMouse, <span class="stringliteral">&quot;UnderMouse&quot;</span>);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span> </div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="comment">// Don&#39;t show the option to prevent apps from remembering their window</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="comment">// positions on Wayland because it doesn&#39;t work on Wayland and the feature</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="comment">// will eventually be implemented in a different way there.</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <span class="comment">// This option lives in the kdeglobals file because it is consumed by</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="comment">// kxmlgui.</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    m_ui-&gt;kcfg_AllowKDEAppsToRememberWindowPositions-&gt;setVisible(KWindowSystem::isPlatformX11());</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    m_ui-&gt;kcfg_ActivationDesktopPolicy-&gt;setItemData(KWinOptionsSettings::ActivationDesktopPolicyChoices::SwitchToOtherDesktop, <span class="stringliteral">&quot;SwitchToOtherDesktop&quot;</span>);</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    m_ui-&gt;kcfg_ActivationDesktopPolicy-&gt;setItemData(KWinOptionsSettings::ActivationDesktopPolicyChoices::BringToCurrentDesktop, <span class="stringliteral">&quot;BringToCurrentDesktop&quot;</span>);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>}</div>
</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="foldopen" id="foldopen00264" data-start="{" data-end="}">
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno"><a class="line" href="class_k_advanced_config.html#a5055761a65bac8abc292e6926ab59c37">  264</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_advanced_config.html#a5055761a65bac8abc292e6926ab59c37">KAdvancedConfig::save</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>{</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    KCModule::save();</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="keywordflow">if</span> (standAlone) {</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <span class="comment">// Send signal to all kwin instances</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        QDBusMessage message =</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>            QDBusMessage::createSignal(<span class="stringliteral">&quot;/KWin&quot;</span>, <span class="stringliteral">&quot;org.kde.KWin&quot;</span>, <span class="stringliteral">&quot;reloadConfig&quot;</span>);</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        QDBusConnection::sessionBus().send(message);</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    }</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>}</div>
</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="foldopen" id="foldopen00276" data-start="{" data-end="}">
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="class_k_win_moving_config_form.html#a2146dd5afd0fa4133a5283649712b6b7">  276</a></span><a class="code hl_function" href="class_k_win_moving_config_form.html#a2146dd5afd0fa4133a5283649712b6b7">KWinMovingConfigForm::KWinMovingConfigForm</a>(QWidget *parent)</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    : QWidget(parent)</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>{</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    setupUi(parent);</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>}</div>
</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="foldopen" id="foldopen00282" data-start="{" data-end="}">
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno"><a class="line" href="class_k_moving_config.html#a4bae90a0be87e4e74ff7644c756fb884">  282</a></span><a class="code hl_function" href="class_k_moving_config.html#a4bae90a0be87e4e74ff7644c756fb884">KMovingConfig::KMovingConfig</a>(<span class="keywordtype">bool</span> _standAlone, KWinOptionsSettings *settings, QWidget *parent)</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    : KCModule(parent, KPluginMetaData())</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    , standAlone(_standAlone)</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    , m_ui(new <a class="code hl_class" href="class_k_win_moving_config_form.html">KWinMovingConfigForm</a>(widget()))</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>{</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keywordflow">if</span> (settings) {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <a class="code hl_function" href="class_k_moving_config.html#a6262d8bdf230ea1856d3e07502598aae">initialize</a>(settings);</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    }</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>}</div>
</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="foldopen" id="foldopen00292" data-start="{" data-end="}">
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno"><a class="line" href="class_k_moving_config.html#a6262d8bdf230ea1856d3e07502598aae">  292</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_moving_config.html#a6262d8bdf230ea1856d3e07502598aae">KMovingConfig::initialize</a>(KWinOptionsSettings *settings)</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>{</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    m_settings = settings;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    addConfig(m_settings, widget());</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>}</div>
</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="foldopen" id="foldopen00298" data-start="{" data-end="}">
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno"><a class="line" href="class_k_moving_config.html#ac3204a660f519b49d5c8d100e4c6814f">  298</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="class_k_moving_config.html#ac3204a660f519b49d5c8d100e4c6814f">KMovingConfig::save</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>{</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    KCModule::save();</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="keywordflow">if</span> (standAlone) {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="comment">// Send signal to all kwin instances</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        QDBusMessage message =</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>            QDBusMessage::createSignal(<span class="stringliteral">&quot;/KWin&quot;</span>, <span class="stringliteral">&quot;org.kde.KWin&quot;</span>, <span class="stringliteral">&quot;reloadConfig&quot;</span>);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        QDBusConnection::sessionBus().send(message);</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    }</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>}</div>
</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="preprocessor">#include &quot;moc_windows.cpp&quot;</span></div>
<div class="ttc" id="aclass_k_advanced_config_html_a5055761a65bac8abc292e6926ab59c37"><div class="ttname"><a href="class_k_advanced_config.html#a5055761a65bac8abc292e6926ab59c37">KAdvancedConfig::save</a></div><div class="ttdeci">void save() override</div><div class="ttdef"><b>Definition</b> <a href="#l00264">windows.cpp:264</a></div></div>
<div class="ttc" id="aclass_k_advanced_config_html_a7e252730c89b2ace354ba2e5ab9bd6bf"><div class="ttname"><a href="class_k_advanced_config.html#a7e252730c89b2ace354ba2e5ab9bd6bf">KAdvancedConfig::initialize</a></div><div class="ttdeci">void initialize(KWinOptionsSettings *settings, KWinOptionsKDEGlobalsSettings *globalSettings)</div><div class="ttdef"><b>Definition</b> <a href="#l00240">windows.cpp:240</a></div></div>
<div class="ttc" id="aclass_k_advanced_config_html_a960cbba3eca2a584bf74984ef30d5ea2"><div class="ttname"><a href="class_k_advanced_config.html#a960cbba3eca2a584bf74984ef30d5ea2">KAdvancedConfig::KAdvancedConfig</a></div><div class="ttdeci">KAdvancedConfig(bool _standAlone, KWinOptionsSettings *settings, KWinOptionsKDEGlobalsSettings *globalSettings, QWidget *parent)</div><div class="ttdef"><b>Definition</b> <a href="#l00230">windows.cpp:230</a></div></div>
<div class="ttc" id="aclass_k_focus_config_html_a725361ff31b4b1b2a2700fc42a3bc33c"><div class="ttname"><a href="class_k_focus_config.html#a725361ff31b4b1b2a2700fc42a3bc33c">KFocusConfig::defaults</a></div><div class="ttdeci">void defaults() override</div><div class="ttdef"><b>Definition</b> <a href="#l00218">windows.cpp:218</a></div></div>
<div class="ttc" id="aclass_k_focus_config_html_a85ac8f529f09653e8480ee117a738be5"><div class="ttname"><a href="class_k_focus_config.html#a85ac8f529f09653e8480ee117a738be5">KFocusConfig::initialize</a></div><div class="ttdeci">void initialize(KWinOptionsSettings *settings)</div><div class="ttdef"><b>Definition</b> <a href="#l00060">windows.cpp:60</a></div></div>
<div class="ttc" id="aclass_k_focus_config_html_a902b16ed2d3968692264adfb02b6779c"><div class="ttname"><a href="class_k_focus_config.html#a902b16ed2d3968692264adfb02b6779c">KFocusConfig::save</a></div><div class="ttdeci">void save() override</div><div class="ttdef"><b>Definition</b> <a href="#l00183">windows.cpp:183</a></div></div>
<div class="ttc" id="aclass_k_focus_config_html_abbd7aeb17eba4ff321f8265dcde2ca2c"><div class="ttname"><a href="class_k_focus_config.html#abbd7aeb17eba4ff321f8265dcde2ca2c">KFocusConfig::load</a></div><div class="ttdeci">void load() override</div><div class="ttdef"><b>Definition</b> <a href="#l00158">windows.cpp:158</a></div></div>
<div class="ttc" id="aclass_k_focus_config_html_abfa9b12d17504b5590549725d134c86b"><div class="ttname"><a href="class_k_focus_config.html#abfa9b12d17504b5590549725d134c86b">KFocusConfig::KFocusConfig</a></div><div class="ttdeci">KFocusConfig(bool _standAlone, KWinOptionsSettings *settings, QWidget *parent)</div><div class="ttdef"><b>Definition</b> <a href="#l00050">windows.cpp:50</a></div></div>
<div class="ttc" id="aclass_k_moving_config_html_a4bae90a0be87e4e74ff7644c756fb884"><div class="ttname"><a href="class_k_moving_config.html#a4bae90a0be87e4e74ff7644c756fb884">KMovingConfig::KMovingConfig</a></div><div class="ttdeci">KMovingConfig(bool _standAlone, KWinOptionsSettings *settings, QWidget *parent)</div><div class="ttdef"><b>Definition</b> <a href="#l00282">windows.cpp:282</a></div></div>
<div class="ttc" id="aclass_k_moving_config_html_a6262d8bdf230ea1856d3e07502598aae"><div class="ttname"><a href="class_k_moving_config.html#a6262d8bdf230ea1856d3e07502598aae">KMovingConfig::initialize</a></div><div class="ttdeci">void initialize(KWinOptionsSettings *settings)</div><div class="ttdef"><b>Definition</b> <a href="#l00292">windows.cpp:292</a></div></div>
<div class="ttc" id="aclass_k_moving_config_html_ac3204a660f519b49d5c8d100e4c6814f"><div class="ttname"><a href="class_k_moving_config.html#ac3204a660f519b49d5c8d100e4c6814f">KMovingConfig::save</a></div><div class="ttdeci">void save() override</div><div class="ttdef"><b>Definition</b> <a href="#l00298">windows.cpp:298</a></div></div>
<div class="ttc" id="aclass_k_win_advanced_config_form_html"><div class="ttname"><a href="class_k_win_advanced_config_form.html">KWinAdvancedConfigForm</a></div><div class="ttdef"><b>Definition</b> <a href="windows_8h_source.html#l00049">windows.h:50</a></div></div>
<div class="ttc" id="aclass_k_win_advanced_config_form_html_aa54b772a8f46a8ea471ceeec0b177ea1"><div class="ttname"><a href="class_k_win_advanced_config_form.html#aa54b772a8f46a8ea471ceeec0b177ea1">KWinAdvancedConfigForm::KWinAdvancedConfigForm</a></div><div class="ttdeci">KWinAdvancedConfigForm(QWidget *parent)</div><div class="ttdef"><b>Definition</b> <a href="#l00224">windows.cpp:224</a></div></div>
<div class="ttc" id="aclass_k_win_focus_config_form_html"><div class="ttname"><a href="class_k_win_focus_config_form.html">KWinFocusConfigForm</a></div><div class="ttdef"><b>Definition</b> <a href="windows_8h_source.html#l00033">windows.h:34</a></div></div>
<div class="ttc" id="aclass_k_win_focus_config_form_html_a4980bbe7de8c5dea743ab9fa229077d1"><div class="ttname"><a href="class_k_win_focus_config_form.html#a4980bbe7de8c5dea743ab9fa229077d1">KWinFocusConfigForm::KWinFocusConfigForm</a></div><div class="ttdeci">KWinFocusConfigForm(QWidget *parent)</div><div class="ttdef"><b>Definition</b> <a href="#l00044">windows.cpp:44</a></div></div>
<div class="ttc" id="aclass_k_win_moving_config_form_html"><div class="ttname"><a href="class_k_win_moving_config_form.html">KWinMovingConfigForm</a></div><div class="ttdef"><b>Definition</b> <a href="windows_8h_source.html#l00041">windows.h:42</a></div></div>
<div class="ttc" id="aclass_k_win_moving_config_form_html_a2146dd5afd0fa4133a5283649712b6b7"><div class="ttname"><a href="class_k_win_moving_config_form.html#a2146dd5afd0fa4133a5283649712b6b7">KWinMovingConfigForm::KWinMovingConfigForm</a></div><div class="ttdeci">KWinMovingConfigForm(QWidget *parent)</div><div class="ttdef"><b>Definition</b> <a href="#l00276">windows.cpp:276</a></div></div>
<div class="ttc" id="awindows_8cpp_html_a01d99d8f84cd29efe3e89f7a05481c51"><div class="ttname"><a href="windows_8cpp.html#a01d99d8f84cd29efe3e89f7a05481c51">FOCUS_FOLLOWS_MOUSE</a></div><div class="ttdeci">#define FOCUS_FOLLOWS_MOUSE</div><div class="ttdef"><b>Definition</b> <a href="#l00034">windows.cpp:34</a></div></div>
<div class="ttc" id="awindows_8cpp_html_a5a1474d93e2ebcdaabd47f643788adb2"><div class="ttname"><a href="windows_8cpp.html#a5a1474d93e2ebcdaabd47f643788adb2">CLICK_TO_FOCUS</a></div><div class="ttdeci">#define CLICK_TO_FOCUS</div><div class="ttdef"><b>Definition</b> <a href="#l00032">windows.cpp:32</a></div></div>
<div class="ttc" id="awindows_8cpp_html_a68c7b2334fd4799930a34fb1559add1a"><div class="ttname"><a href="windows_8cpp.html#a68c7b2334fd4799930a34fb1559add1a">CLICK_TO_FOCUS_MOUSE_PRECEDENT</a></div><div class="ttdeci">#define CLICK_TO_FOCUS_MOUSE_PRECEDENT</div><div class="ttdef"><b>Definition</b> <a href="#l00033">windows.cpp:33</a></div></div>
<div class="ttc" id="awindows_8cpp_html_ad78d1ff462bd8bb5af59581b0f24d1f3"><div class="ttname"><a href="windows_8cpp.html#ad78d1ff462bd8bb5af59581b0f24d1f3">FOCUS_FOLLOWS_MOUSE_PRECEDENT</a></div><div class="ttdeci">#define FOCUS_FOLLOWS_MOUSE_PRECEDENT</div><div class="ttdef"><b>Definition</b> <a href="#l00035">windows.cpp:35</a></div></div>
<div class="ttc" id="awindows_8cpp_html_ae819e63bce4d34e8e7dac43295fddaf0"><div class="ttname"><a href="windows_8cpp.html#ae819e63bce4d34e8e7dac43295fddaf0">FOCUS_UNDER_MOUSE</a></div><div class="ttdeci">#define FOCUS_UNDER_MOUSE</div><div class="ttdef"><b>Definition</b> <a href="#l00036">windows.cpp:36</a></div></div>
<div class="ttc" id="awindows_8cpp_html_af84070ae619475983f055a5a1c986ad8"><div class="ttname"><a href="windows_8cpp.html#af84070ae619475983f055a5a1c986ad8">FOCUS_STRICTLY_UNDER_MOUSE</a></div><div class="ttdeci">#define FOCUS_STRICTLY_UNDER_MOUSE</div><div class="ttdef"><b>Definition</b> <a href="#l00037">windows.cpp:37</a></div></div>
<div class="ttc" id="awindows_8h_html"><div class="ttname"><a href="windows_8h.html">windows.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Feb 17 2024 01:42:09 for KWin by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
