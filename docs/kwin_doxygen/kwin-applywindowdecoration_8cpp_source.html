<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KWin: /home/vaughanm/other-git/kwin/src/kcms/decoration/kwin-applywindowdecoration.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">KWin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_cb0f8542d3c985156b1e4c09e38eaa7f.html">kwin</a></li><li class="navelem"><a class="el" href="dir_1436adf8da9308409df4e1a559fda635.html">src</a></li><li class="navelem"><a class="el" href="dir_70fcc1bb06a506a5dfcaba0fb47d1abe.html">kcms</a></li><li class="navelem"><a class="el" href="dir_913274b0e8b1a676ee98b835cfda7142.html">decoration</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">kwin-applywindowdecoration.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="kwin-applywindowdecoration_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">    SPDX-FileCopyrightText: 2021 Dan Leinir Turthra Jensen &lt;admin@leinir.dk&gt;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"></span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">    SPDX-License-Identifier: GPL-2.0-only OR GPL-3.0-only OR LicenseRef-KDE-Accepted-GPL</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">*/</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;kwindecorationsettings.h&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="decorationmodel_8h.html">decorationmodel.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;KLocalizedString&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;QCommandLineParser&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;QDBusConnection&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;QDBusMessage&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;QDebug&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;QFileInfo&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;QTimer&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="kwin-applywindowdecoration_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">   21</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="kwin-applywindowdecoration_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>{</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    QCoreApplication app(argc, argv);</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="keywordtype">int</span> exitCode{0};</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    QCoreApplication::setApplicationName(QStringLiteral(<span class="stringliteral">&quot;kwin-applywindowdecoration&quot;</span>));</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    QCoreApplication::setApplicationVersion(QStringLiteral(<span class="stringliteral">&quot;1.0&quot;</span>));</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    QCoreApplication::setOrganizationDomain(QStringLiteral(<span class="stringliteral">&quot;kde.org&quot;</span>));</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    KLocalizedString::setApplicationDomain(<span class="stringliteral">&quot;kwin-applywindowdecoration&quot;</span>);</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    QCommandLineParser *parser = <span class="keyword">new</span> QCommandLineParser;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    parser-&gt;addHelpOption();</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    parser-&gt;setApplicationDescription(i18n(<span class="stringliteral">&quot;This tool allows you to set the window decoration theme for the currently active session, without accidentally setting it to one that is either not available, or which is already set.&quot;</span>));</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    parser-&gt;addPositionalArgument(QStringLiteral(<span class="stringliteral">&quot;theme&quot;</span>), i18n(<span class="stringliteral">&quot;The name of the window decoration theme you wish to set for KWin. Passing a full path will attempt to find a theme in that directory, and then apply that if one can be deduced.&quot;</span>));</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    parser-&gt;addOption(QCommandLineOption(QStringLiteral(<span class="stringliteral">&quot;list-themes&quot;</span>), i18n(<span class="stringliteral">&quot;Show all the themes available on the system (and which is the current theme)&quot;</span>)));</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    parser-&gt;process(app);</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <a class="code hl_class" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html">KDecoration2::Configuration::DecorationsModel</a> *model = <span class="keyword">new</span> <a class="code hl_class" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html">KDecoration2::Configuration::DecorationsModel</a>(&amp;app);</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    model-&gt;<a class="code hl_slot" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#ae5e6c22def269c14e5d113ffbd71fff0">init</a>();</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    KWinDecorationSettings *settings = <span class="keyword">new</span> KWinDecorationSettings(&amp;app);</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    QTextStream ts(stdout);</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="keywordflow">if</span> (!parser-&gt;positionalArguments().isEmpty()) {</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>        QString requestedTheme{parser-&gt;positionalArguments().constFirst()};</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        <span class="keywordflow">if</span> (requestedTheme.endsWith(QStringLiteral(<span class="stringliteral">&quot;/*&quot;</span>))) {</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>            <span class="comment">// Themes installed through KNewStuff will commonly be given an installed files entry</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>            <span class="comment">// which has the main directory name and an asterix to say the cursors are all in that directory,</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>            <span class="comment">// and since one of the main purposes of this tool is to allow adopting things from a kns dialog,</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>            <span class="comment">// we handle that little weirdness here.</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>            requestedTheme.remove(requestedTheme.length() - 2, 2);</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        }</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        <span class="keywordtype">bool</span> themeResolved{<span class="keyword">true</span>};</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>        <span class="keywordflow">if</span> (requestedTheme.contains(QStringLiteral(<span class="stringliteral">&quot;/&quot;</span>))) {</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>            themeResolved = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>            <span class="keywordflow">if</span> (QFileInfo::exists(requestedTheme) &amp;&amp; QFileInfo(requestedTheme).isDir()) {</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>                <span class="comment">// Since this is the name of a directory, let&#39;s do a bit of checking to see</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>                <span class="comment">// if we know enough about it to deduce that this is, in fact, a theme.</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>                QStringList splitTheme = requestedTheme.split(QStringLiteral(<span class="stringliteral">&quot;/&quot;</span>), Qt::SkipEmptyParts);</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>                <span class="keywordflow">if</span> (splitTheme.count() &gt; 3 &amp;&amp; splitTheme[splitTheme.count() - 3] == QStringLiteral(<span class="stringliteral">&quot;aurorae&quot;</span>) &amp;&amp; splitTheme[splitTheme.count() - 2] == QStringLiteral(<span class="stringliteral">&quot;themes&quot;</span>)) {</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>                    <span class="comment">// We think this is an aurorae theme, but let&#39;s just make a little more certain...</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>                    QString file(QStringLiteral(<span class="stringliteral">&quot;aurorae/themes/%1/metadata.desktop&quot;</span>).arg(splitTheme.last()));</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>                    QString path = QStandardPaths::locate(QStandardPaths::GenericDataLocation, file);</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>                    <span class="keywordflow">if</span> (!path.isEmpty() &amp;&amp; path == QStringLiteral(<span class="stringliteral">&quot;%1/metadata.desktop&quot;</span>).arg(requestedTheme)) {</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>                        requestedTheme = QString(<span class="stringliteral">&quot;__aurorae__svg__&quot;</span>).append(splitTheme.last());</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>                        themeResolved = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>                        ts &lt;&lt; i18n(<span class="stringliteral">&quot;Resolved %1 to the KWin Aurorae theme \&quot;%2\&quot;, and will attempt to set that as your current theme.&quot;</span>)</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>                                  .arg(parser-&gt;positionalArguments().first(), requestedTheme)</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>                           &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>                    }</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>                }</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>                ts &lt;&lt; i18n(<span class="stringliteral">&quot;You attempted to pass a file path, but this could not be resolved to a theme, and we will have to abort, due to having no theme to set&quot;</span>) &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>                exitCode = -1;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>            }</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        }</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        <span class="keywordflow">if</span> (settings-&gt;theme() == requestedTheme) {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>            ts &lt;&lt; i18n(<span class="stringliteral">&quot;The requested theme \&quot;%1\&quot; is already set as the window decoration theme.&quot;</span>, requestedTheme) &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>            <span class="comment">// not an error condition, just nothing happens</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (themeResolved) {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>            <span class="keywordtype">int</span> index{-1};</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>            QStringList availableThemes;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#ae7e4b7e3e8cc8d3f2bd3a32f52fc6585">rowCount</a>(); ++i) {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>                <span class="keyword">const</span> QString themeName = model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a39e8f0ee297c5c381c9befd70b98039c">data</a>(model-&gt;index(i), <a class="code hl_enumvalue" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a8b110f07c13afc373564f51a2c52973aac87e3ae2b8bb62d27c7c7dce9fa22d4a">KDecoration2::Configuration::DecorationsModel::ThemeNameRole</a>).toString();</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>                <span class="keywordflow">if</span> (requestedTheme == themeName) {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>                    index = i;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>                }</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                availableThemes &lt;&lt; themeName;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            }</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>            <span class="keywordflow">if</span> (index &gt; -1) {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>                settings-&gt;setTheme(model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a39e8f0ee297c5c381c9befd70b98039c">data</a>(model-&gt;index(index), <a class="code hl_enumvalue" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a8b110f07c13afc373564f51a2c52973aac87e3ae2b8bb62d27c7c7dce9fa22d4a">KDecoration2::Configuration::DecorationsModel::ThemeNameRole</a>).toString());</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>                settings-&gt;setPluginName(model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a39e8f0ee297c5c381c9befd70b98039c">data</a>(model-&gt;index(index), <a class="code hl_enumvalue" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a8b110f07c13afc373564f51a2c52973aaad1978aaca456fa7fb92f3d34b4a3ed1">KDecoration2::Configuration::DecorationsModel::PluginNameRole</a>).toString());</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                <span class="keywordflow">if</span> (settings-&gt;save()) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>                    <span class="comment">// Send a signal to all kwin instances</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>                    QDBusMessage message = QDBusMessage::createSignal(QStringLiteral(<span class="stringliteral">&quot;/KWin&quot;</span>),</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>                                                                      QStringLiteral(<span class="stringliteral">&quot;org.kde.KWin&quot;</span>),</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>                                                                      QStringLiteral(<span class="stringliteral">&quot;reloadConfig&quot;</span>));</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>                    QDBusConnection::sessionBus().send(message);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                    ts &lt;&lt; i18n(<span class="stringliteral">&quot;Successfully applied the cursor theme %1 to your current Plasma session&quot;</span>,</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>                               model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a39e8f0ee297c5c381c9befd70b98039c">data</a>(model-&gt;index(index), <a class="code hl_enumvalue" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a8b110f07c13afc373564f51a2c52973aac87e3ae2b8bb62d27c7c7dce9fa22d4a">KDecoration2::Configuration::DecorationsModel::ThemeNameRole</a>).toString())</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                       &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>                    ts &lt;&lt; i18n(<span class="stringliteral">&quot;Failed to save your theme settings - the reason is unknown, but this is an unrecoverable error. You may find that simply trying again will work.&quot;</span>);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>                    exitCode = -1;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>                }</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>                ts &lt;&lt; i18n(<span class="stringliteral">&quot;Could not find theme \&quot;%1\&quot;. The theme should be one of the following options: %2&quot;</span>, requestedTheme, availableThemes.join(QStringLiteral(<span class="stringliteral">&quot;, &quot;</span>))) &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>                exitCode = -1;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>            }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        }</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (parser-&gt;isSet(QStringLiteral(<span class="stringliteral">&quot;list-themes&quot;</span>))) {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        ts &lt;&lt; i18n(<span class="stringliteral">&quot;You have the following KWin window decoration themes on your system:&quot;</span>) &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#ae7e4b7e3e8cc8d3f2bd3a32f52fc6585">rowCount</a>(); ++i) {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>            <span class="keyword">const</span> QString displayName = model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a39e8f0ee297c5c381c9befd70b98039c">data</a>(model-&gt;index(i), Qt::DisplayRole).toString();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>            <span class="keyword">const</span> QString themeName = model-&gt;<a class="code hl_function" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a39e8f0ee297c5c381c9befd70b98039c">data</a>(model-&gt;index(i), <a class="code hl_enumvalue" href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a8b110f07c13afc373564f51a2c52973aac87e3ae2b8bb62d27c7c7dce9fa22d4a">KDecoration2::Configuration::DecorationsModel::ThemeNameRole</a>).toString();</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>            <span class="keywordflow">if</span> (settings-&gt;theme() == themeName) {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                ts &lt;&lt; QStringLiteral(<span class="stringliteral">&quot; * %1 (theme name: %2 - current theme for this Plasma session)&quot;</span>).arg(displayName, themeName) &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                ts &lt;&lt; QStringLiteral(<span class="stringliteral">&quot; * %1 (theme name: %2)&quot;</span>).arg(displayName, themeName) &lt;&lt; Qt::endl;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>            }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        parser-&gt;showHelp();</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    QTimer::singleShot(0, &amp;app, [&amp;app, &amp;exitCode]() {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        app.exit(exitCode);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    });</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">return</span> app.exec();</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>}</div>
<div class="ttc" id="aclass_k_decoration2_1_1_configuration_1_1_decorations_model_html"><div class="ttname"><a href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html">KDecoration2::Configuration::DecorationsModel</a></div><div class="ttdef"><b>Definition:</b> <a href="decorationmodel_8h_source.html#l00019">decorationmodel.h:20</a></div></div>
<div class="ttc" id="aclass_k_decoration2_1_1_configuration_1_1_decorations_model_html_a39e8f0ee297c5c381c9befd70b98039c"><div class="ttname"><a href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a39e8f0ee297c5c381c9befd70b98039c">KDecoration2::Configuration::DecorationsModel::data</a></div><div class="ttdeci">QVariant data(const QModelIndex &amp;index, int role=Qt::DisplayRole) const override</div><div class="ttdef"><b>Definition:</b> <a href="decorationmodel_8cpp_source.html#l00039">decorationmodel.cpp:39</a></div></div>
<div class="ttc" id="aclass_k_decoration2_1_1_configuration_1_1_decorations_model_html_a8b110f07c13afc373564f51a2c52973aaad1978aaca456fa7fb92f3d34b4a3ed1"><div class="ttname"><a href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a8b110f07c13afc373564f51a2c52973aaad1978aaca456fa7fb92f3d34b4a3ed1">KDecoration2::Configuration::DecorationsModel::PluginNameRole</a></div><div class="ttdeci">@ PluginNameRole</div><div class="ttdef"><b>Definition:</b> <a href="decorationmodel_8h_source.html#l00024">decorationmodel.h:24</a></div></div>
<div class="ttc" id="aclass_k_decoration2_1_1_configuration_1_1_decorations_model_html_a8b110f07c13afc373564f51a2c52973aac87e3ae2b8bb62d27c7c7dce9fa22d4a"><div class="ttname"><a href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#a8b110f07c13afc373564f51a2c52973aac87e3ae2b8bb62d27c7c7dce9fa22d4a">KDecoration2::Configuration::DecorationsModel::ThemeNameRole</a></div><div class="ttdeci">@ ThemeNameRole</div><div class="ttdef"><b>Definition:</b> <a href="decorationmodel_8h_source.html#l00025">decorationmodel.h:25</a></div></div>
<div class="ttc" id="aclass_k_decoration2_1_1_configuration_1_1_decorations_model_html_ae5e6c22def269c14e5d113ffbd71fff0"><div class="ttname"><a href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#ae5e6c22def269c14e5d113ffbd71fff0">KDecoration2::Configuration::DecorationsModel::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="decorationmodel_8cpp_source.html#l00115">decorationmodel.cpp:115</a></div></div>
<div class="ttc" id="aclass_k_decoration2_1_1_configuration_1_1_decorations_model_html_ae7e4b7e3e8cc8d3f2bd3a32f52fc6585"><div class="ttname"><a href="class_k_decoration2_1_1_configuration_1_1_decorations_model.html#ae7e4b7e3e8cc8d3f2bd3a32f52fc6585">KDecoration2::Configuration::DecorationsModel::rowCount</a></div><div class="ttdeci">int rowCount(const QModelIndex &amp;parent=QModelIndex()) const override</div><div class="ttdef"><b>Definition:</b> <a href="decorationmodel_8cpp_source.html#l00031">decorationmodel.cpp:31</a></div></div>
<div class="ttc" id="adecorationmodel_8h_html"><div class="ttname"><a href="decorationmodel_8h.html">decorationmodel.h</a></div></div>
<div class="ttc" id="akwin-applywindowdecoration_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="kwin-applywindowdecoration_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="kwin-applywindowdecoration_8cpp_source.html#l00021">kwin-applywindowdecoration.cpp:21</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 22 2023 22:13:37 for KWin by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
